---
title: "Taller3_VictorHugoAngelOchoa"
author: "VICTOR HUGO ANGEL OCHOA"
date: "7 de julio de 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

suppressMessages(suppressWarnings(library(usethis)))
suppressMessages(suppressWarnings(library(fs)))
suppressMessages(suppressWarnings(library(packrat)))
suppressMessages(suppressWarnings(library(testthat)))
suppressMessages(suppressWarnings(library(roxygen2)))

```

<br><br>

```{r, echo=TRUE}

#directorio = "C:/_COSTA_3/_R_AVANZADO/03"
#directorio = "D:/___COSTA/R_AVANZADO/03"

directorio = "E:/_GITHUB/Promidat"

```


### 1) Utilizando los paquetes devtools, usethis, packrat y el dataset Datos Churn.csv cree un proyecto de RStudio y realice los siguientes ejercicios:

<br><br>

#### a) Cree la estructura de carpetas para su proyecto y documente cual es el objetivo de cada una de las carpetas.

```{r, echo=TRUE}

# Datos_Churn_test.csv

setwd(directorio)

# CREA EL PROYECTO
create_project("Tarea3-proyecto")

# ALMACENA CODIGO FUENTE R, CALCULOS Y TRANSFORMACIONES EN EL PROCESO DE ANALISIS
use_directory("R")

# LECTURA DE LOS DATOS YA ESTAN ALMACENADOS EN CSV, BASE DE DATOS, ETC
use_directory("R/preparation")

# DOCUMENTOS Q INDIQUEN LAS TRANSFORMACIONES SOBRE LAS TABLAS ORIGINALES (CAMBIO DE FORMATO, NUEVAS VARIABLES, ETC)
use_directory("R/processing")

# DEBEMOS INCLUIR LA CREACIÓN DEL MODELO Y LA EVALUACION DEL MISMO, LA LÓGICA QUE NOS PERMITE TRABAJAR CON MÚLTIPLES MODELOS EN CASO DE SER NECESARIO
use_directory("R/modeling")

# VALIDACIONES QUE NOS PERMITIRÁN VERIFICAR QUE LAS FUNCIONES DE NUESTRO CODIGO RETORNEN LO ESPERADO Y ASI PODER DETECTAR QUE FUNCIONES SE VIERON AFECTADAS CON UN CAMBIO DE NUESTRO CODIGO
use_directory("test")

# 
use_directory("data")

# COPIA LOCAL DE DATOS GENERADOS EN 'PREPARATION', CON EL FIN DE PODER TRABAJAR SIN CONEXION A RED O EN RED QUE TENGA RESTRINGIDO EL ACCESO AL ORIGEN DE LOS DATOS. NOS PERMITE VERIFICAR LOS RESULTADOS EN ETAPAS DE ANALISIS Y ENTRENAMIENTO
use_directory("data/raw")

# GUARDAUN UNA COPIA LOCAL DE LOS RESULTADOS OBTENIDOS CON EL FIN DE EVITAR REPETIR TODO EL PROCESO A LA HORA DE CONSTRUIR NUESTROS REPORTES.
use_directory("data/processed")

# ALMACENA ARCHIVOS RMD
use_directory("reports")

# ALMACENA ARCHIVOS DE IMAGENES
use_directory("reports/img")

# ALMACENA ARCHIVOS DE ESTILOS CSS
use_directory("reports/css")

```

```{r, echo=TRUE}

# COPIA DE LOS DATOS AL DIRECTORIO PREPARATION

file_copy(paste0(directorio,"/Datos_Churn_train.csv"), paste0(directorio, "/Tarea3-proyecto/R/preparation/Datos_Churn_train.csv"))

file_copy(paste0(directorio,"/Datos_Churn_test.csv"), paste0(directorio, "/Tarea3-proyecto/R/preparation/Datos_Churn_test.csv"))

```

#### b) Respetando la estructura de carpetas seleccionada realice un analisis exploratorio que cuente como minimo con las siguientes etapas:

- Lectura de datos (csv o xlsx).

```{r, echo=TRUE}

# LECTURA DEL ARCHIVO CSV
datosChurnTrain <- read.csv(paste0(directorio, "/Tarea3-proyecto/R/preparation/Datos_Churn_train.csv"), sep=",", dec=".", header=T)

datosChurnTest <- read.csv(paste0(directorio, "/Tarea3-proyecto/R/preparation/Datos_Churn_test.csv"), sep=",", dec=".", header=T)

```


- Transformacion y limpieza de los datos.

```{r, echo=TRUE}

# CONVERTIR A FACTOR EN TRAINING
datosChurnTrain$IdCuenta = as.factor(datosChurnTrain$IdCuenta)
datosChurnTrain$TarjetaCredito = as.factor(datosChurnTrain$TarjetaCredito)
datosChurnTrain$Activo = as.factor(datosChurnTrain$Activo)
datosChurnTrain$DejaBanco = as.factor(datosChurnTrain$DejaBanco)

# CONVERTIR A FACTOR EN TEST
datosChurnTest$IdCuenta = as.factor(datosChurnTest$IdCuenta)
datosChurnTest$TarjetaCredito = as.factor(datosChurnTest$TarjetaCredito)
datosChurnTest$Activo = as.factor(datosChurnTest$Activo)
datosChurnTest$DejaBanco = as.factor(datosChurnTest$DejaBanco)

# ELIMINAR NAs DE TRAINING
datosChurnTrain <- na.omit(datosChurnTrain)

# ELIMINAR NAs DE TEST
datosChurnTest <- na.omit(datosChurnTest)



# datosChurnTest

```


```{r, echo=TRUE}



```


```{r, echo=TRUE}




```

- Analisis exploratorio de los datos.

```{r, echo=TRUE}

# RESUMEN DEL DF DE TRAINING
summary(datosChurnTrain)

# RESUMEN DEL DF DE TEST
summary(datosChurnTest)

```

```{r, echo=TRUE}

# RESUMEN DEL DF DE TRAINING
apply(datosChurnTrain[, c("Edad", "ScoringCrediticio")], 2, function(x) {plot(density(x))})

#function(x) {plot(density(x))}

```



- Reporte de los resultados utilizando Rmarkdown.


```{r, echo=TRUE}

#load(file = "C:/Users/Deiby S/Desktop/Programacion avanzada R/Clase 3/Proyecto_Tarea_Deiby/R/preparation/accidentes.RData")   # Con este sirve.

load(file = "R/preparation/accidentes.RData")             # Con este no.

```



#### c) Publique su proyecto en Github y adjunte el enlace del repositorio publico creado para el proyecto.

<br><br>
Enlace del repositorio:
<br>
https://github.com/nvhaomz/Promidat
<br>


#### d) Empaquete su proyecto con la funcion bundle del paquete packrat y adjunte el archivo generado.

<br><br>


